# kvm
PiKVM guide
## Подготовка

перед тем как приступить, нам нужно закупиться, что нужно:
- Raspberry Pi 4 (именно четверка, на пятой процессор не позволит, третья слабовата)
- карта видеозахвата(подойдет простая за 800р)
- <img width="1000" height="1000" alt="image" src="https://github.com/user-attachments/assets/2a410f4e-8bad-4f99-96b9-5f54ce76b9bc" />


- корпус с вентиляторами для Малинки(рекомендую, ибо устройство тУпАоХуЕеТ)
- официальный блок питания
- usb-c splitter (с поддержкой OTG и питанием, ссылки приложу)
- HDMI провод
- USB провод(не лоховской, не просто зарядный провод, отталкивайтесь от своего сплиттера, дальше поймешь почему, не задавай много вопросов)
- microSD карта более чем 32Gb (ну и переходник, чтобы можно было загрузить ОС, это может быть что угодно, тут смотри как кайф)

##### Небольшое отступление по железу

- зачастую маркетплейсы продают бандл из Raspberry Pi (далее по тексту буду называть Малинкой) и комплектующим (корпус, БП, флешка, HDMI to microHDMI и так далее), так вот я рекомендую присматриваться получше, чтобы не было лишних трат. Я брал бандл с корпусом, БП, флешкой и проводом, мне не понадобился только провод и покупку считаю успешной, но есть наборы бестолковые для нашего кейса
- сплитер нам нужен для того, чтобы запитать единственный OTG порт USB-C, который еще и предназначен для питания. Он может питаться от ноутбука, но через день я словил варнинг о том, что питания маловато и скоро придется хоронить малинку
- моя карта видеозахвата называется HDTV video capture за косарь даже дешевле и ее хватает с головой, тыж не будешь себе на 4к в браузер стримить, кмон
- microSD рекомендую брать хороший, чтоб не тупила ОСь

## Приступим

#### Готовим флешку
1. первым делом нам нужно скачать образ для нашей Малинки, идем [сюда](https://files.pikvm.org/images/v2-hdmiusb-rpi4/aarch64/v2-hdmiusb-rpi4-aarch64-latest.img.xz)
2. далее нужно скачать [офф прилу для установки ОС](https://github.com/raspberrypi/rpi-imager/releases) на флешку (если что ее уже нужно присоединить)
3. [тут гайд по установке](https://docs.pikvm.org/flashing_os/#flashing-the-image)

### Подключаемся

1. на свободный USB-A 2.0 порт присоединяем HDMI новобука через карту видеозахвата
2. в USB-C разъем Малинки пихаем сплиттер, в который нужно запихнуть питание и в другой порт пустить провод от ноутбука
3. под платой, с фронтальной стороны есть разъем для SD карты, пихаем ее туда
4. опционально: если есть вентилятор, то красный провод подключаем на 3-й пин по правому краю, а черный на 2-й пин, если расположить устройство так, что все порты внизу, оч аккуратно с этим, может замкнуть(у меня так было, чуть не похоронил)
5. обязательно нужно подключить патчкорд от модема, роутера и так далее, вай-фай потом настроим
6. идем в браузер и вписываем айпи устройства в локальной сети (как узнать айпи, спроси у нейросети), если не получается по айпи, то может помочь такой адрес: `localhost.localdomain`
7. и логин и пароль `admin` ([обязательно смени!](https://docs.pikvm.org/auth/#changing-the-kvm-password))
8. всякие приседания с настройкой делаем в терминале, но а мы переходим в KVM
  <img width="1259" height="1100" alt="Pasted image 20250806120715 1" src="https://github.com/user-attachments/assets/627556fc-57e4-46ca-8f59-350c18a1b6ca" />
10. вуаля (VNC настроим ниже)

##### Небольшое отступление по софту

- проверь, что у тебя все работает, у меня, например, не работали мышь и клава, потому что проблема оказалась в проводе от ноутбука, потому тут уже нужно подбирать, чтобы провод был функциональным
- в настройках есть такая штука, как mouse jiggler - отличная вещь которая делает микро движение, чтобы экран не тух
<img width="623" height="559" alt="Pasted image 20250806120538" src="https://github.com/user-attachments/assets/035c5dfc-d166-4630-bc51-f7347a383118" />
